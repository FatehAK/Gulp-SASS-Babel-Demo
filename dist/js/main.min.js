"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var Enemy=function(){function e(t,n,r){_classCallCheck(this,e),this.x=t,this.y=n+55,this.speed=r,this.xblock=101,this.sprite="images/enemy-bug.png"}return _createClass(e,[{key:"update",value:function(e){this.x<5*this.xblock?this.x+=this.speed*e:this.x=-this.xblock}},{key:"render",value:function(){ctx.drawImage(Resources.get(this.sprite),this.x,this.y)}}]),e}(),Player=function(){function e(){_classCallCheck(this,e),this.lives=3,this.xblock=101,this.yblock=83,this.startX=2*this.xblock,this.startY=4*this.yblock+55,this.x=this.startX,this.y=this.startY,this.sprite="images/char-boy.png",this.win=!1}return _createClass(e,[{key:"render",value:function(){ctx.drawImage(Resources.get(this.sprite),this.x,this.y)}},{key:"handleInput",value:function(e){switch(e){case"left":this.x>0&&(this.x-=this.xblock);break;case"up":this.y>this.yblock&&(this.y-=this.yblock);break;case"right":this.x<4*this.xblock&&(this.x+=this.xblock);break;case"down":this.y<4*this.yblock&&(this.y+=this.yblock)}}},{key:"update",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=allEnemies[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var a=r.value;this.y===a.y&&a.x+a.xblock/2>this.x&&a.x<this.x+this.xblock/2&&(this.lives--,this.removeHeart(),this.resetPlayer())}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}55===this.y&&(this.win=!0)}},{key:"resetPlayer",value:function(){this.x=this.startX,this.y=this.startY}},{key:"removeHeart",value:function(){var e=document.querySelector(".heartlost"),t=document.querySelectorAll(".hearts li");e.setAttribute("src","");var n=!0,r=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;if("none"!=o.style.display){if(o.style.display="none",0===this.lives){var l=document.querySelector(".game-over");e.setAttribute("src","images/gameover.gif"),l.classList.remove("hide")}break}}}catch(e){r=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}}}]),e}(),player=new Player,bug1=new Enemy(-101,0,600),bug2=new Enemy(-101,83,400),bug3=new Enemy(-404,83,400),bug4=new Enemy(-101,166,350),bug5=new Enemy(-202,166,350),bug6=new Enemy(-101,249,250),allEnemies=[];allEnemies.push(bug1,bug2,bug3,bug4,bug5,bug6),document.addEventListener("keyup",function(e){player.handleInput({37:"left",38:"up",39:"right",40:"down"}[e.keyCode])}),function(e){var t,n,r=(void 0).document,i=(void 0).window,a=r.createElement("canvas"),s=a.getContext("2d");a.width=505,a.height=606;var o=document.querySelector(".game-win"),l=document.querySelector(".game-over"),c=document.querySelector(".btn-start"),u=document.querySelector(".btn-replay"),h=document.querySelector(".btn-try"),y=document.querySelector(".canvas-bg"),d=document.querySelector(".hearts"),f=[u,h];function m(){var e=Date.now();!function(e){!function(e){allEnemies.forEach(function(t){t.update(e)}),player.update()}(e)}((e-t)/1e3),function(){var e,t,n=["images/water-block.png","images/stone-block.png","images/stone-block.png","images/stone-block.png","images/grass-block.png","images/grass-block.png"];for(s.clearRect(0,0,a.width,a.height),e=0;e<6;e++)for(t=0;t<5;t++)s.drawImage(Resources.get(n[e]),101*t,83*e);allEnemies.forEach(function(e){e.render()}),player.render()}(),t=e;var r=document.querySelector(".thumbup");r.setAttribute("src",""),0===player.lives?(player.lives=3,cancelAnimationFrame(n)):!0===player.win?(r.setAttribute("src","images/thumbsup.gif"),cancelAnimationFrame(n),o.classList.toggle("hide"),function(){var e=document.querySelectorAll(".hearts li"),t=document.querySelector(".modal-heart");t.innerHTML="";var n=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;if("none"!=o.style.display){var l=document.createElement("I");l.className="fa fa-heart",l.style.fontSize="20px",l.style.color="#ff3737",t.appendChild(l)}}}catch(e){r=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}}()):n=i.requestAnimationFrame(m)}function g(){player.win=!1,o.classList.add("hide"),l.classList.add("hide"),player.resetPlayer(),t=Date.now(),m()}a.classList.add("canvas-body"),y.appendChild(a),f.forEach(function(e){e.addEventListener("click",function(){player.lives=3,function(){d.innerHTML="";for(var e=1;e<=3;e++){var t=document.createElement("LI"),n=document.createElement("I");n.className="fa fa-heart",n.style.fontSize="20px",n.style.color="rgb(255, 55, 55)",n.style.letterSpacing="2px",n.listStyle="none",n.display="inline-block",t.appendChild(n),d.appendChild(t)}}(),g()})}),c.addEventListener("click",function(){var e=document.querySelector(".start-panel"),t=document.querySelector(".footer"),n=document.querySelector(".lives-info");d.classList.remove("hide"),t.classList.remove("hide"),n.classList.remove("hide"),e.classList.add("hide"),y.classList.toggle("hide")}),Resources.load(["images/stone-block.png","images/water-block.png","images/grass-block.png","images/enemy-bug.png","images/char-boy.png"]),Resources.onReady(g),(void 0).ctx=s}(),function(){var e={},t=[];function n(n){if(e[n])return e[n];var i=new Image;i.onload=function(){e[n]=i,r()&&t.forEach(function(e){e()})},e[n]=!1,i.src=n}function r(){var t=!0;for(var n in e)e.hasOwnProperty(n)&&!e[n]&&(t=!1);return t}window.Resources={load:function(e){e instanceof Array?e.forEach(function(e){n(e)}):n(e)},get:function(t){return e[t]},onReady:function(e){t.push(e)},isReady:r}}();